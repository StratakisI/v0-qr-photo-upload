(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2039:(e,t,a)=>{Promise.resolve().then(a.bind(a,6417))},6417:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>A});var s=a(5155),r=a(2115),i=a(6634),o=a(2085),l=a(2596),n=a(9688);function d(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,l.$)(t))}let c=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function u(e){let{className:t,variant:a,size:r,asChild:o=!1,...l}=e,n=o?i.DX:"button";return(0,s.jsx)(n,{"data-slot":"button",className:d(c({variant:a,size:r,className:t})),...l})}function p(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:d("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function m(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:d("px-6",t),...a})}let x=(0,o.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function h(e){let{className:t,variant:a,asChild:r=!1,...o}=e,l=r?i.DX:"span";return(0,s.jsx)(l,{"data-slot":"badge",className:d(x({variant:a}),t),...o})}var g=a(5339),v=a(9869);function f(e){let{onUpload:t,disabled:a}=e,[i,o]=(0,r.useState)(!1),[l,n]=(0,r.useState)(null);return((0,r.useEffect)(()=>{if(window.cloudinary)window.cloudinary&&o(!0);else{let e=document.createElement("script");e.src="https://upload-widget.cloudinary.com/global/all.js",e.onload=()=>o(!0),e.onerror=()=>n("Failed to load Cloudinary widget"),document.head.appendChild(e)}},[]),l)?(0,s.jsxs)("div",{className:"flex items-center gap-2 text-destructive text-sm",children:[(0,s.jsx)(g.A,{className:"h-4 w-4"}),l]}):(0,s.jsxs)(u,{onClick:()=>{if(!i||!window.cloudinary){n("Cloudinary widget not loaded");return}window.cloudinary.createUploadWidget({cloudName:"dhaoitlbq",uploadPreset:"openWedding",sources:["local","camera"],multiple:!1,maxFiles:1,clientAllowedFormats:["jpg","jpeg","png","gif","webp"],maxFileSize:1e7,folder:"event-photos",tags:["event","user-upload"],context:{caption:"Event photo upload"},eager:[{width:800,height:600,crop:"limit",quality:"auto"}]},(e,a)=>{if(e){n("Upload failed: "+e.message);return}"success"===a.event&&t(a.info.secure_url,a.info.public_id)}).open()},disabled:a||!i,className:"flex items-center gap-2",children:[(0,s.jsx)(v.A,{className:"h-4 w-4"}),i?"Upload to Cloudinary":"Loading..."]})}var b=a(3311),j=a(7580),y=a(4355),w=a(1976),N=a(6516),k=a(1788);function A(){let[e,t]=(0,r.useState)([{id:"1",url:"/v0-qr-photo-upload/happy-people-at-party-with-colorful-lights.png",title:"Opening Ceremony",uploadedBy:"Sarah M.",uploadedAt:new Date("2024-01-15T10:30:00"),likes:24},{id:"2",url:"/v0-qr-photo-upload/group-selfie-at-outdoor-event-with-sunset.png",title:"Sunset Vibes",uploadedBy:"Mike R.",uploadedAt:new Date("2024-01-15T18:45:00"),likes:18},{id:"3",url:"/v0-qr-photo-upload/food-table-at-celebration-with-decorations.png",title:"Delicious Spread",uploadedBy:"Emma L.",uploadedAt:new Date("2024-01-15T12:15:00"),likes:31}]),[a,i]=(0,r.useState)(null),[o,l]=(0,r.useState)(!1),n=(0,r.useRef)(null);(0,r.useEffect)(()=>{(async()=>{let e=localStorage.getItem("event-photos");if(e)try{let a=JSON.parse(e).map(e=>({...e,uploadedAt:new Date(e.uploadedAt)}));t(e=>[...a,...e.filter(e=>"1"===e.id||"2"===e.id||"3"===e.id)])}catch(e){console.error("Failed to load saved photos:",e)}try{let e=await fetch("https://res.cloudinary.com/dhaoitlbq/image/list/event.json");if(e.ok){let a=(await e.json()).resources.map(e=>{var t;return{id:e.public_id,url:e.secure_url,publicId:e.public_id,title:(null===(t=e.context)||void 0===t?void 0:t.caption)||"Photo ".concat(e.public_id.split("/").pop()),uploadedBy:"Event Guest",uploadedAt:new Date(e.created_at),likes:0}});t(e=>{let t=new Set(e.map(e=>e.id));return[...a.filter(e=>!t.has(e.id)),...e]})}}catch(e){console.error("Failed to fetch photos from Cloudinary:",e)}})()},[]),(0,r.useEffect)(()=>{let t=e.filter(e=>!["1","2","3"].includes(e.id));t.length>0&&localStorage.setItem("event-photos",JSON.stringify(t))},[e]);let d=(e,a)=>{let s={id:a,url:e,publicId:a,title:"Photo ".concat(Date.now()),uploadedBy:"You",uploadedAt:new Date,likes:0};t(e=>[s,...e]),l(!1)},c=async e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!s)return;l(!0);let r={id:"temp-".concat(Date.now()),url:URL.createObjectURL(s),title:s.name.split(".")[0],uploadedBy:"You (uploading...)",uploadedAt:new Date,likes:0};t(e=>[r,...e]),setTimeout(()=>{l(!1)},2e3)},x=e=>{t(t=>t.map(t=>t.id===e?{...t,likes:t.likes+1}:t))};return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted/30 to-background",children:[(0,s.jsxs)("div",{className:"relative overflow-hidden bg-gradient-to-r from-primary/10 via-accent/5 to-primary/10",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-[url('/v0-qr-photo-upload/celebration-confetti-pattern.png')] opacity-5"}),(0,s.jsxs)("div",{className:"relative container mx-auto px-4 py-16 text-center",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-4",children:[(0,s.jsx)(b.A,{className:"h-8 w-8 text-primary animate-pulse"}),(0,s.jsx)("h1",{className:"text-4xl md:text-6xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Event Memories"}),(0,s.jsx)(b.A,{className:"h-8 w-8 text-accent animate-pulse"})]}),(0,s.jsx)("p",{className:"text-xl text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Share your amazing moments and discover memories from fellow attendees"}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[(0,s.jsx)(f,{onUpload:d,disabled:o}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,s.jsx)(j.A,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:[e.length," photos shared"]})]})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsxs)(u,{variant:"outline",size:"sm",onClick:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.click()},disabled:o,className:"text-sm",children:[(0,s.jsx)(y.A,{className:"mr-2 h-4 w-4"}),o?"Uploading...":"Or upload from device"]})}),(0,s.jsx)("input",{ref:n,type:"file",accept:"image/*",onChange:c,className:"hidden"})]})]}),(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsx)(p,{className:"border-2 border-dashed border-primary/30 bg-gradient-to-r from-primary/5 to-accent/5 hover:border-primary/50 transition-colors duration-300",children:(0,s.jsxs)(m,{className:"p-8 text-center",children:[(0,s.jsx)(v.A,{className:"h-12 w-12 text-primary mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Quick Upload to Cloudinary"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"Upload your photos directly to the cloud for permanent storage"}),(0,s.jsx)(f,{onUpload:d,disabled:o})]})})}),(0,s.jsxs)("div",{className:"container mx-auto px-4 pb-16",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold",children:"Photo Gallery"}),(0,s.jsxs)(h,{variant:"secondary",className:"text-sm px-3 py-1",children:[e.length," Photos"]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map(e=>(0,s.jsxs)(p,{className:"group overflow-hidden hover:shadow-xl transition-all duration-300 cursor-pointer border-0 bg-card/50 backdrop-blur-sm",onClick:()=>i(e),children:[(0,s.jsxs)("div",{className:"relative aspect-square overflow-hidden",children:[(0,s.jsx)("img",{src:e.url||"/placeholder.svg",alt:e.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,s.jsxs)("div",{className:"absolute bottom-4 left-4 right-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[(0,s.jsx)("h3",{className:"font-semibold text-sm mb-1",children:e.title}),(0,s.jsxs)("p",{className:"text-xs text-white/80",children:["by ",e.uploadedBy]})]}),e.publicId&&(0,s.jsx)("div",{className:"absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded",children:"☁️ Saved"})]}),(0,s.jsx)(m,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)(u,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),x(e.id)},className:"text-muted-foreground hover:text-primary p-1 h-auto",children:[(0,s.jsx)(w.A,{className:"h-4 w-4 mr-1"}),e.likes]})}),(0,s.jsx)(u,{variant:"ghost",size:"sm",onClick:e=>e.stopPropagation(),className:"text-muted-foreground hover:text-primary p-1 h-auto",children:(0,s.jsx)(N.A,{className:"h-4 w-4"})})]})})]},e.id))})]}),a&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>i(null),children:(0,s.jsxs)("div",{className:"relative max-w-4xl max-h-[90vh] bg-card rounded-lg overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("img",{src:a.url||"/placeholder.svg",alt:a.title,className:"w-full h-auto max-h-[70vh] object-contain"}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-2",children:a.title}),(0,s.jsxs)("p",{className:"text-muted-foreground",children:["Uploaded by ",a.uploadedBy," • ",a.uploadedAt.toLocaleDateString()]})]}),(0,s.jsx)(u,{variant:"ghost",size:"sm",onClick:()=>i(null),className:"text-muted-foreground hover:text-foreground",children:"✕"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)(u,{variant:"outline",size:"sm",onClick:()=>x(a.id),className:"flex items-center gap-2",children:[(0,s.jsx)(w.A,{className:"h-4 w-4"}),a.likes," Likes"]}),(0,s.jsxs)(u,{variant:"outline",size:"sm",className:"flex items-center gap-2 bg-transparent",children:[(0,s.jsx)(N.A,{className:"h-4 w-4"}),"Share"]}),(0,s.jsxs)(u,{variant:"outline",size:"sm",className:"flex items-center gap-2 bg-transparent",children:[(0,s.jsx)(k.A,{className:"h-4 w-4"}),"Download"]})]})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[212,441,684,358],()=>t(2039)),_N_E=e.O()}]);